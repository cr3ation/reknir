# ========================================
# REKNIR PRODUCTION ENVIRONMENT VARIABLES
# ========================================
#
# IMPORTANT: Copy this file to .env.prod and fill in the values
# Generate strong passwords with: openssl rand -base64 32
# Generate secret key with: openssl rand -hex 32
#
# NEVER commit .env.prod to version control!
#

# ========================================
# Database Configuration
# ========================================
POSTGRES_USER=reknir
POSTGRES_PASSWORD=CHANGE_THIS_TO_A_STRONG_PASSWORD
POSTGRES_DB=reknir

# ========================================
# Backend Configuration
# ========================================
# Generate with: openssl rand -hex 32
SECRET_KEY=CHANGE_THIS_TO_A_LONG_RANDOM_SECRET_KEY_MINIMUM_32_CHARACTERS

# Debug mode (always False in production)
DEBUG=False

# CORS Origins - Set to your domain(s)
# Example: https://reknir.example.com,https://www.reknir.example.com
CORS_ORIGINS=https://your-domain.com

# ========================================
# Frontend Configuration
# ========================================
# API URL for frontend (used during build)
# Use relative path since frontend is served from same domain via nginx
VITE_API_URL=/api

# ========================================
# Cloudflare Tunnel Configuration
# ========================================
# Get this token from Cloudflare Zero Trust Dashboard
# 1. Go to https://one.dash.cloudflare.com
# 2. Navigate to Networks → Tunnels
# 3. Create a tunnel named 'reknir'
# 4. Copy the tunnel token (starts with 'eyJ...')
TUNNEL_TOKEN=your_cloudflare_tunnel_token_here

# ========================================
# Backup Configuration
# ========================================
# Keep backups for 7 years (Swedish law requirement)
BACKUP_KEEP_DAYS=2555

# ========================================
# Setup Instructions
# ========================================
#
# 1. Copy this file:
#    cp .env.prod.example .env.prod
#
# 2. Generate strong passwords:
#    openssl rand -base64 32  # For POSTGRES_PASSWORD
#    openssl rand -hex 32     # For SECRET_KEY
#
# 3. Set up Cloudflare Tunnel:
#    - Go to https://one.dash.cloudflare.com
#    - Navigate to Networks → Tunnels
#    - Create tunnel named 'reknir'
#    - Copy tunnel token to TUNNEL_TOKEN
#    - Add Public Hostname: your-domain.com → http://nginx:80
#
# 4. Update domain settings:
#    - Replace 'your-domain.com' with your actual domain
#    - Set CORS_ORIGINS to your domain
#    - Set VITE_API_URL to your domain
#
# 5. Start services:
#    docker compose -f docker-compose.prod.yml --env-file .env.prod up -d
#
# 6. Configure Cloudflare dashboard:
#    - SSL/TLS mode: Full (not Full Strict)
#    - Always Use HTTPS: On
#    - Minimum TLS Version: TLS 1.2
#
# See CLOUDFLARE.md for detailed instructions
#
